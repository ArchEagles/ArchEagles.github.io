<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User-to-User Chat</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.2.0/socket.io.js"></script>
  <script src="chat.js"></script>

  <style>
    /* Style your chat application here */
  </style>
</head>
<body>
  <div id="chat-container">
    <div id="chat-messages"></div>
    <form id="chat-form">
      <input type="text" id="message-input" placeholder="Enter your message">
      <button type="submit">Send</button>
    </form>
  </div>

  <script>
    // Connect to the server using WebSockets
    const socket = io('http://localhost:3000');

    // Handle user login
    const usernameInput = document.getElementById('username-input');
    const usernameForm = document.getElementById('username-form');
    usernameForm.addEventListener('submit', (event) => {
      event.preventDefault();

      const username = usernameInput.value.trim();
      if (username) {
        socket.emit('user login', username);

        // Hide the login form and show the chat interface
        usernameForm.style.display = 'none';
        chatContainer.style.display = 'block';
      }
    });

    // Handle message sending
    const chatForm = document.getElementById('chat-form');
    chatForm.addEventListener('submit', (event) => {
      event.preventDefault();

      const messageInput = document.getElementById('message-input');
      const message = messageInput.value.trim();
      if (message) {
        // Send message to the server
        socket.emit('chat message', message);

        // Clear the message input
        messageInput.value = '';
      }
    });

    // Handle incoming messages
    socket.on('chat message', (message) => {
      // Display the received message
      const chatMessages = document.getElementById('chat-messages');
      const messageElement = document.createElement('div');
      messageElement.classList.add('message');
      messageElement.innerHTML = `
        <p>${message.username}: ${message.message}</p>
      `;
      chatMessages.appendChild(messageElement);

      // Scroll to the bottom of the chat messages container
      chatMessages.scrollTop = chatMessages.scrollHeight;
    });
  </script>
</body>
</html>
